# ðŸš€ Complete Setup Instructions

## File Structure

Your project should have this exact structure:

```
Encypter/
â”‚
â”œâ”€â”€ main.py                          # Main application entry
â”œâ”€â”€ config.py                        # Configuration
â”œâ”€â”€ requirements.txt                 # Dependencies
â”‚
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ __init__.py                 # Models init
â”‚   â””â”€â”€ user.py                     # User management
â”‚
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ __init__.py                 # Routes init
â”‚   â”œâ”€â”€ auth_routes.py              # Authentication routes
â”‚   â””â”€â”€ crypto_routes.py            # Crypto routes
â”‚
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ __init__.py                 # Services init
â”‚   â”œâ”€â”€ auth_service.py             # Auth service
â”‚   â””â”€â”€ crypto_service.py           # Crypto service
â”‚
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ __init__.py                 # Utils init
â”‚   â”œâ”€â”€ decorators.py               # Security decorators
â”‚   â””â”€â”€ validators.py               # Input validators
â”‚
â””â”€â”€ templates/
    â”œâ”€â”€ __init__.py                 # Templates init
    â””â”€â”€ html_template.py            # Frontend HTML
```

## Step-by-Step Setup

### 1. Verify All Files Are Present

Run this PowerShell command in your project directory:

```powershell
Get-ChildItem -Recurse -File | Select-Object FullName
```

### 2. Check Each __init__.py File

Make sure you have these EXACT contents:

**models/__init__.py:**
```python
from .user import UserManager, user_manager
__all__ = ['UserManager', 'user_manager']
```

**routes/__init__.py:**
```python
from .auth_routes import auth_bp
from .crypto_routes import crypto_bp
__all__ = ['auth_bp', 'crypto_bp']
```

**services/__init__.py:**
```python
from .crypto_service import CryptoService
from .auth_service import AuthService
__all__ = ['CryptoService', 'AuthService']
```

**utils/__init__.py:**
```python
from .decorators import (
    login_required, 
    rate_limit, 
    csrf_protected, 
    require_json, 
    generate_csrf_token,
    clean_rate_limit_store
)
from .validators import (
    validate_password_strength, 
    sanitize_input,
    validate_username,
    validate_plaintext,
    validate_ciphertext,
    validate_algorithm,
    validate_key,
    validate_key_name,
    validate_public_key_format,
    ValidationError
)

__all__ = [
    'login_required',
    'rate_limit',
    'csrf_protected',
    'require_json',
    'generate_csrf_token',
    'clean_rate_limit_store',
    'validate_password_strength',
    'sanitize_input',
    'validate_username',
    'validate_plaintext',
    'validate_ciphertext',
    'validate_algorithm',
    'validate_key',
    'validate_key_name',
    'validate_public_key_format',
    'ValidationError'
]
```

**templates/__init__.py:**
```python
from .html_template import HTML_TEMPLATE
__all__ = ['HTML_TEMPLATE']
```

### 3. Install Dependencies

```powershell
# Create virtual environment
python -m venv venv

# Activate it
.\\venv\\Scripts\\activate

# Upgrade pip
python -m pip install --upgrade pip

# Install requirements
pip install -r requirements.txt
```

### 4. Set Environment Variables (Optional for Development)

```powershell
$env:FLASK_ENV="development"
$env:SECRET_KEY="your-secret-key-here"
```

### 5. Run the Application

```powershell
python main.py
```

### 6. Access the Application

Open your browser and navigate to:
```
http://localhost:5000/api
```

## Common Errors and Fixes

### Error: "ImportError: cannot import name"

**Solution:** Check that all __init__.py files match the contents above exactly.

### Error: "ModuleNotFoundError: No module named 'cryptography'"

**Solution:** 
```powershell
pip install cryptography==42.0.0
```

### Error: "ModuleNotFoundError: No module named 'Crypto'"

**Solution:** 
```powershell
pip install pycryptodome==3.19.0
```

### Error: "SECRET_KEY environment variable must be set"

**Solution:** This only happens if FLASK_ENV=production. Either:
1. Set the environment variable:
   ```powershell
   $env:SECRET_KEY="$(python -c 'import secrets; print(secrets.token_hex(32))')"
   ```
2. Or use development mode:
    ```
        $env:App_ENV="development"
    ```
### Error: Port 5000 already in use

**Solution:** Change port in main.py or kill the process:
```powershell
# Find process
Get-Process -Name python | Where-Object {$_.Path -like "*venv*"}

# Or use different port in main.py
app.run(debug=False, host='127.0.0.1', port=5001)
```

## Testing the Application

### 1. Register a User
- Go to http://localhost:5000/api
- Click "Register" tab
- Username: `testuser` (3-50 chars)
- Password: `TestPass123!` (12+ chars, upper, lower, number, special)
- Confirm password
- Click "Register"

### 2. Test Encryption
- Select algorithm: "AES-256-GCM"
- Enter key: `MySecretKey123!`
- Enter plaintext: `Hello, World!`
- Click "ðŸ”’ Encrypt"
- Copy ciphertext from output

### 3. Test Decryption
- Change mode to "Decrypt"
- Paste ciphertext in input
- Enter same key: `MySecretKey123!`
- Click "ðŸ”“ Decrypt"
- Should see original plaintext

### 4. Test RSA
- Select algorithm: "RSA-2048"
- Click "Generate RSA Keys"
- Enter plaintext
- Click "ðŸ”’ Encrypt"
- Change mode to "Decrypt"
- Paste ciphertext
- Click "ðŸ”“ Decrypt"

## Verification Checklist

- [ ] All files present in correct directories
- [ ] All __init__.py files have correct imports
- [ ] Virtual environment created and activated
- [ ] Dependencies installed successfully
- [ ] Application starts without errors
- [ ] Can access http://localhost:5000/api
- [ ] Can register a user
- [ ] Can login
- [ ] Can encrypt/decrypt with AES
- [ ] Can generate RSA keys
- [ ] Can encrypt/decrypt with RSA
- [ ] Can logout
- [ ] Can change password

## Production Deployment

For production deployment, see README.md for:
- nginx configuration
- gunicorn setup
- HTTPS/SSL configuration
- Environment variables
- Security hardening

## Support

If you encounter any issues:

1. Check all __init__.py files match exactly
2. Verify all imports in each file
3. Make sure virtual environment is activated
4. Check Python version (3.9+ required)
5. Review error messages carefully
6. Check the SECURITY_AUDIT_REPORT.md for details

## Quick Troubleshooting Commands

```powershell
# Check Python version
python --version

# List installed packages
pip list

# Check for import errors
python -c "from models import user_manager; print('Models OK')"
python -c "from routes import auth_bp; print('Routes OK')"
python -c "from services import CryptoService; print('Services OK')"
python -c "from utils import login_required; print('Utils OK')"

# Test imports one by one
python -c "import config; print('Config OK')"
python -c "from flask import Flask; print('Flask OK')"
python -c "from cryptography.hazmat.primitives import hashes; print('Cryptography OK')"
```

